<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>RamDisk: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">RamDisk
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="contents">
<div class="textblock"><h2>Introduction </h2>
<p>This is a very early version of a RamDisk library. It provides a FAT style file system on external RAM devices.</p>
<p>Much of the code has not throughly been tested. It is likely that features will be added, removed or changed. The API is still under development</p>
<h2>New Features in this Release </h2>
<p>Support for <a class="el" href="class_m_b85_r_s2_m_t.html" title="MB85RS2MT raw I/O library for a multiple chips. ">MB85RS2MT</a> FRAM has been added.</p>
<p>Support for multiple chips has been added.</p>
<p>Fast small template classes are provided for a single 23LCV1024 or <a class="el" href="class_m_b85_r_s2_m_t.html" title="MB85RS2MT raw I/O library for a multiple chips. ">MB85RS2MT</a> chip.</p>
<h2>Hardware </h2>
<p>This library was developed using a Microchip 23LCV1024 1 Mbit SPI serial SRAM with battery backup.</p>
<p><a class="el" href="class_m_b85_r_s2_m_t.html" title="MB85RS2MT raw I/O library for a multiple chips. ">MB85RS2MT</a> FRAM chips are also supported.</p>
<p>You must have working 23LCV1024, 23LC1024, <a class="el" href="class_m_b85_r_s2_m_t.html" title="MB85RS2MT raw I/O library for a multiple chips. ">MB85RS2MT</a> hardware, or write your own RAM device library. You should be able to use other RAM devices by writing a library with the <a class="el" href="class_ram_base_device.html" title="RamBaseDevice virtual base class for derived RAM classes. ">RamBaseDevice</a> API.</p>
<h2>Installation </h2>
<p>You must install four libraries to try the examples included with RamDisk. All four libraries may be required to run examples because of the way the Arduino IDE preprocesses files.</p>
<p>The RamDisk folder contains file-system code and several examples.</p>
<p>The <a class="el" href="class_m23_l_c_v1024.html" title="23LCV1024 raw I/O library for multiple chips. ">M23LCV1024</a> folder contains the raw SRAM driver.</p>
<p>The <a class="el" href="class_m_b85_r_s2_m_t.html" title="MB85RS2MT raw I/O library for a multiple chips. ">MB85RS2MT</a> folder contains the raw FRAM driver.</p>
<p>The SdFat folder contains a version of SdFat that can coexist with RamDisk.</p>
<h2>Examples </h2>
<p>Most examples can be run in four modes. SRAM single chip template, SRAM multiple chip class, FRAM single chip template, FRAM multiple chip class.</p>
<p>The single chip template classes are smaller and faster.</p>
<p>The modes are defined by these symbols. The default configuration is the single chip template class for a 23LCV1024.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define USE_FRAM 0</span></div>
<div class="line"><span class="preprocessor">#define USE_MULTIPLE_CHIPS 0</span></div>
</div><!-- fragment --><h3>HelloRamDisk</h3>
<p>Start with HelloRamDisk.ino. This example writes two lines of text to a file and then reads the file and displays the text on the serial monitor.</p>
<p>This is just a simple example to test installation and hardware setup.</p>
<p>Here is the output from HelloRamDisk:</p>
<div class="fragment"><div class="line">Format (Y/N): Y</div>
<div class="line"></div>
<div class="line">Volume Info:</div>
<div class="line">FAT Size: 4</div>
<div class="line">Dir Start Block: 5</div>
<div class="line">Dir Entry Count: 64</div>
<div class="line">Data Start Block: 9</div>
<div class="line">Cluster Count: 1015</div>
<div class="line">Cluster Size Bytes: 512</div>
<div class="line"></div>
<div class="line">1: Hello RamDisk!</div>
<div class="line">2: Line to test fgets</div>
<div class="line"></div>
<div class="line">Done!</div>
</div><!-- fragment --><h3>MultipleChipTest</h3>
<p>The example verifies that multiple chip configurations work correctly.</p>
<p>Here is sample output from MultipleChipTest:</p>
<div class="fragment"><div class="line">Format (Y/N): Y</div>
<div class="line"></div>
<div class="line">Volume Info:</div>
<div class="line">FAT Size: 4</div>
<div class="line">Dir Start Block: 5</div>
<div class="line">Dir Entry Count: 64</div>
<div class="line">Data Start Block: 9</div>
<div class="line">Cluster Count: 1015</div>
<div class="line">Cluster Size Bytes: 512</div>
<div class="line"></div>
<div class="line">Writing 129920 numbers</div>
<div class="line">Starting Read Test</div>
<div class="line">Done!</div>
</div><!-- fragment --><h3>RamByteReadWrite</h3>
<p>This example demonstrates the factor of ten speedup provided by <a class="el" href="class_ram_stream.html" title="RamStream implements a minimal stdio stream. ">RamStream</a> for single byte transfers.</p>
<div class="fragment"><div class="line">FreeRam: 1618</div>
<div class="line">Format (Y/N): Y</div>
<div class="line"></div>
<div class="line">File read/write stats</div>
<div class="line">fileSize: 51000</div>
<div class="line">write millis: 2044</div>
<div class="line">read millis: 1893</div>
<div class="line"></div>
<div class="line">Stream getc/putc stats</div>
<div class="line">streamSize: 51000</div>
<div class="line">putc millis: 189</div>
<div class="line">getc millis: 182</div>
<div class="line">Done!</div>
</div><!-- fragment --><h3>RamStdioBench</h3>
<p>This example demonstrates the speedup ratio for formatted output using stdio style buffering. <a class="el" href="class_ram_file.html" title="RamBaseFile with Print. ">RamFile</a> is used for Arduino style print and <a class="el" href="class_ram_stream.html" title="RamStream implements a minimal stdio stream. ">RamStream</a> is used for stdio style formatting, either printField or compatibility print.</p>
<div class="fragment"><div class="line">Type any character to start</div>
<div class="line">uint8_t 0 to 255, 100 times </div>
<div class="line">fileSize: 116500</div>
<div class="line">print millis: 6194</div>
<div class="line">stdio millis: 686</div>
<div class="line">ratio: 9.03</div>
<div class="line"></div>
<div class="line">uint16_t 0 to 18000</div>
<div class="line">fileSize: 114890</div>
<div class="line">print millis: 5812</div>
<div class="line">stdio millis: 723</div>
<div class="line">ratio: 8.04</div>
<div class="line"></div>
<div class="line">uint32_t 0 to 18000</div>
<div class="line">fileSize: 114890</div>
<div class="line">print millis: 5809</div>
<div class="line">stdio millis: 947</div>
<div class="line">ratio: 6.13</div>
<div class="line"></div>
<div class="line">uint32_t 1000000000 to 1000010000</div>
<div class="line">fileSize: 120000</div>
<div class="line">print millis: 5741</div>
<div class="line">stdio millis: 1106</div>
<div class="line">ratio: 5.19</div>
<div class="line"></div>
<div class="line">float nnn.ffff, 10000 times</div>
<div class="line">fileSize: 100000</div>
<div class="line">print millis: 9442</div>
<div class="line">stdio millis: 1771</div>
<div class="line">ratio: 5.33</div>
<div class="line"></div>
<div class="line">Done</div>
</div><!-- fragment --><h3>RamTestPrint</h3>
<p>This test does a simple verify of the <a class="el" href="class_ram_stream.html" title="RamStream implements a minimal stdio stream. ">RamStream</a> formatting functions. The sketch compares <a class="el" href="class_ram_stream.html" title="RamStream implements a minimal stdio stream. ">RamStream</a> output with Arduino <a class="el" href="class_print.html" title="Arduino Print Class. ">Print</a> output.</p>
<div class="fragment"><div class="line">FreeRam: 585</div>
<div class="line">Format (Y/N): Y</div>
<div class="line">fileSize: 465</div>
<div class="line">files verify</div>
</div><!-- fragment --><h3>RamDiskLoggerTest</h3>
<p>RamDiskLoggerTest.ino logs 12,000 binary samples to RAM as fast as possible. each sample consists of values from five analog pins. A total of 60,000 values are written to a binary file. Timing statistics and the first ten samples in the log file are printed.</p>
<p>Here is output with pins 0, 2, 4 grounded. Pin 1 is 5 V and pin 3 is 3.3 V.</p>
<p>Most of the time is used by analogRead.</p>
<p>I have adjust the loop count to use the entire RAM with three pins grounded so the example may fail for other cases.</p>
<div class="fragment"><div class="line">Format (Y/N): Y</div>
<div class="line"></div>
<div class="line">Volume Info:</div>
<div class="line">FAT Size: 1</div>
<div class="line">Dir Start Block: 2</div>
<div class="line">Dir Entry Count: 64</div>
<div class="line">Data Start Block: 6</div>
<div class="line">Cluster Count: 250</div>
<div class="line">Cluster Size Bytes: 512</div>
<div class="line"></div>
<div class="line">Starting test</div>
<div class="line">t: 7.42 sec</div>
<div class="line">minMicros: 52</div>
<div class="line">maxMicros: 160</div>
<div class="line">avgMicros: 53</div>
<div class="line">sync micros: 148</div>
<div class="line">filesize: 120000</div>
<div class="line"></div>
<div class="line">pin0,pin1,pin2,pin3,pin4</div>
<div class="line">0,1023,0,689,0</div>
<div class="line">0,1023,0,689,0</div>
<div class="line">0,1023,0,690,0</div>
<div class="line">0,1023,0,689,0</div>
<div class="line">0,1023,0,690,0</div>
<div class="line">0,1023,0,689,0</div>
<div class="line">0,1023,0,689,0</div>
<div class="line">0,1023,0,688,0</div>
<div class="line">0,1023,0,688,0</div>
<div class="line">0,1023,0,688,0</div>
<div class="line">Done</div>
</div><!-- fragment --><h3>RamDiskToSdFat</h3>
<p>RamDiskToSdFat.ino creates a file with 1000 text lines in RAM. It then copies the text file to an SD file.</p>
<p>Here is the output from RamDiskToSdFat:</p>
<div class="fragment"><div class="line">FreeRam: 1087</div>
<div class="line">Format (Y/N): Y</div>
<div class="line">Writing ramFile</div>
<div class="line">TEST.CSV      2000-01-01 01:00:00 16678</div>
<div class="line">Copying ramFile to sdFile</div>
<div class="line">ANALOG00.BIN   2000-01-01 01:00:00 24647680</div>
<div class="line">ANALOG01.BIN   2000-01-01 01:00:00 323584</div>
<div class="line">STDIO.TXT      2000-01-01 01:00:00 114890</div>
<div class="line">PRINT.TXT      2000-01-01 01:00:00 114890</div>
<div class="line">BENCH.DAT      2000-01-01 01:00:00 5000000</div>
<div class="line">DATA_123.CSV   2000-01-01 01:00:00 7</div>
<div class="line">SDFILE.TXT     2000-01-01 01:00:00 465</div>
<div class="line">R_FILE.TXT     2000-01-01 01:00:00 465</div>
<div class="line">R_STREAM.TXT   2000-01-01 01:00:00 465</div>
<div class="line">TEST.CSV       2000-01-01 01:00:00 16678</div>
<div class="line">Done</div>
</div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Aug 6 2014 06:52:10 for RamDisk by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
